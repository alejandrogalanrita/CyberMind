{% extends "layout.html" %}
{% block head %}
    {{ super() }}
    <style>
      .bg-custom {
        background: linear-gradient(to bottom right, white, #6c757d)
      }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!-- KaTeX for LaTeX math rendering -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js"
            onload="renderMathInElement(document.body, { delimiters: [{left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false}] });">
    </script>
{% endblock %}
{% block header %}
    {{ super() }}
{% endblock %}
{% block content %}

<main class="bg-custom">
    <div id="breadcrumb" class="ms-5">
      <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="/">Inicio</a></li>
          <li class="breadcrumb-item active">Dashboard</li>
      </ol>
    </div>
    {{ super() }}
    <div class="row justify-content-center m-5 my-0">
      <div class="p-5 pb-4 border border-2 rounded-3 shadow bg-white">
        <div class="text-center">
          <svg height="25"  viewBox="0 0 289.746 73.535" xmlns="http://www.w3.org/2000/svg">
            <g id="svgGroup" stroke-linecap="round" fill-rule="evenodd" font-size="9pt" stroke="#000" stroke-width="0.25mm" fill="#000" style="stroke:#000;stroke-width:0.25mm;fill:#000">
              <path d="M 160.547 1.27 L 185.547 73.145 L 173.438 73.145 L 154.785 19.238 L 135.938 73.145 L 123.73 73.145 L 148.926 1.27 L 160.547 1.27 Z M 264.746 1.27 L 289.746 73.145 L 277.637 73.145 L 258.984 19.238 L 240.137 73.145 L 227.93 73.145 L 253.125 1.27 L 264.746 1.27 Z M 73.242 73.535 L 50.879 1.172 L 64.258 1.172 L 79.395 57.617 L 79.395 73.535 L 73.242 73.535 Z M 83.398 54.492 L 98.633 1.172 L 111.914 1.172 L 88.477 73.535 L 83.398 73.535 L 83.398 54.492 Z M 212.793 1.172 L 212.793 73.145 L 200.879 73.145 L 200.879 1.172 L 212.793 1.172 Z M 22.852 43.359 L 22.852 31.934 A 232.626 232.626 0 0 1 29.023 34.852 A 254.083 254.083 0 0 1 29.443 35.059 Q 32.813 36.719 35.547 39.111 A 19.378 19.378 0 0 1 39.928 44.709 A 21.97 21.97 0 0 1 40.039 44.922 A 14.888 14.888 0 0 1 41.33 48.623 Q 41.695 50.323 41.775 52.294 A 27.764 27.764 0 0 1 41.797 53.418 A 18.367 18.367 0 0 1 40.479 60.254 Q 39.16 63.574 36.768 66.26 A 20.121 20.121 0 0 1 32.369 69.933 A 23.913 23.913 0 0 1 30.859 70.801 A 22.111 22.111 0 0 1 25.58 72.748 A 27.333 27.333 0 0 1 22.852 73.242 L 22.852 63.867 A 11.995 11.995 0 0 0 26.767 62.205 Q 30.859 59.436 30.859 53.223 A 8.538 8.538 0 0 0 30.398 50.366 A 7.423 7.423 0 0 0 28.613 47.559 A 21.582 21.582 0 0 0 26.095 45.419 Q 24.637 44.351 22.852 43.359 Z M 18.848 0.293 L 18.848 10.547 A 10.816 10.816 0 0 0 13.672 14.307 A 11.279 11.279 0 0 0 12.383 16.412 A 7.838 7.838 0 0 0 11.621 19.727 A 11.529 11.529 0 0 0 11.909 22.377 A 8.018 8.018 0 0 0 13.672 25.879 Q 15.723 28.223 18.848 29.98 L 18.848 41.113 A 122.252 122.252 0 0 1 12.402 37.744 A 30.635 30.635 0 0 1 6.543 33.496 Q 3.906 31.055 2.197 27.832 A 14.194 14.194 0 0 1 0.815 23.805 Q 0.489 22.084 0.488 20.121 A 18.414 18.414 0 0 1 0.488 20.117 A 21.655 21.655 0 0 1 0.902 15.8 A 17.39 17.39 0 0 1 1.953 12.402 Q 3.418 8.984 5.908 6.396 A 18.652 18.652 0 0 1 11.768 2.295 A 25.204 25.204 0 0 1 18.848 0.293 Z M 0 68.359 L 2.051 59.961 A 15.125 15.125 0 0 0 3.179 60.54 Q 3.821 60.838 4.574 61.129 A 30.875 30.875 0 0 0 5.518 61.475 A 75.688 75.688 0 0 0 9.863 62.842 A 44.628 44.628 0 0 0 14.355 63.867 A 27.228 27.228 0 0 0 16.79 64.183 A 21.579 21.579 0 0 0 18.555 64.258 L 18.848 64.258 L 18.848 73.535 L 18.652 73.535 A 48.95 48.95 0 0 1 14.439 73.348 A 54.064 54.064 0 0 1 13.818 73.291 A 39.491 39.491 0 0 1 8.789 72.461 A 26.333 26.333 0 0 1 3.955 70.85 A 16.742 16.742 0 0 1 1.454 69.477 A 13.867 13.867 0 0 1 0 68.359 Z M 148.145 50.293 L 161.23 50.293 L 164.063 58.203 L 145.41 58.203 L 148.145 50.293 Z M 252.344 50.293 L 265.43 50.293 L 268.262 58.203 L 249.609 58.203 L 252.344 50.293 Z M 22.852 9.863 L 22.852 0 Q 27.148 0.098 31.592 0.928 A 27.576 27.576 0 0 1 34.684 1.681 Q 36.206 2.152 37.455 2.773 A 13.713 13.713 0 0 1 38.77 3.516 A 61.046 61.046 0 0 1 38.135 4.846 A 82.043 82.043 0 0 1 37.402 6.299 A 1879.078 1879.078 0 0 1 36.646 7.764 A 1530.309 1530.309 0 0 1 35.938 9.131 A 134.787 134.787 0 0 1 35.608 9.763 Q 35.139 10.655 34.777 11.307 A 46.756 46.756 0 0 1 34.766 11.328 Q 34.357 12.063 34.222 12.252 A 0.454 0.454 0 0 1 34.18 12.305 A 3.654 3.654 0 0 1 33.821 12.136 Q 33.639 12.039 33.435 11.91 A 9.26 9.26 0 0 1 33.008 11.621 A 4.862 4.862 0 0 0 32.469 11.291 Q 32.178 11.136 31.825 10.987 A 12.387 12.387 0 0 0 31.055 10.693 A 12.709 12.709 0 0 0 30.006 10.384 Q 29.053 10.144 27.832 9.961 A 14.731 14.731 0 0 0 26.733 9.841 Q 25.531 9.752 24.02 9.805 A 39.391 39.391 0 0 0 22.852 9.863 Z" vector-effect="non-scaling-stroke"></path>
            </g>
          </svg>
          <p class="text-primary mt-1"><strong class="text-primary">Panel de Usuario</strong></p>
        </div>
      </div>
    </div>
  
    <!-- Users Panel -->
    <div class="row justify-content-center mx-5">
      <div class="justify-content-center align-items-center p-0">
        <div class="mt-4 p-4 border border-2 rounded-3 bg-white shadow">
          <h5 class="mb-4 text-black">Sobre ti</h5>
          <div class="table-responsive" style="max-height: 400px; overflow-y: auto;">
              <table id="User" class="table table-striped" style="margin-bottom: 0;">
                <thead class="table-light" style="position: sticky; top: 0; z-index: 1;">
                  <tr>
                    <th>Email</th>
                    <th>Nombre</th>
                    <th>Apellidos</th>
                    <th>Rol</th>
                  </tr>
                </thead>
                <tbody>
                  <tr data-email="{{ user.email }}">
                    <td>{{ user.email }}</td>
                    <td>{{ user.user_name }}</td>
                    <td>{{ user.user_surname }}</td>
                    <td>{{ user.role }}</td>
                  </tr>
                </tbody>
            </table>
          </div>
        </div>
      </div>
      <!-- End Users Panel -->
      <!-- Projects Panel -->
      <div class="justify-content-center align-items-center pe-lg-0 pb-5 p-0">
        <div class="mt-4 p-4 border border-2 rounded-3 bg-white shadow">
          <h5 class="mb-4 text-black">Proyectos</h5>
          <div class="table-responsive" style="max-height: 400px; overflow-y: auto;">
            <table id="Projects" class="table table-striped" style="margin-bottom: 0;">
              <thead class="table-light" style="position: sticky; top: 0; z-index: 1;">
                <tr>
                  <th><input type="checkbox" id="selectAllProjects"></th>
                  <th>Email</th>
                <th>Proyecto</th>
                <th>Descripción</th>
                <th>Creación</th>
                <th>Modificación</th>
                <th>Archivo</th>
                <th>Reporte</th>
                </tr>
              </thead>
              <tbody>
                  <tr data-email="project.email" data-project="project.project_name">
                    <td><input type="checkbox" class="project-checkbox" data-email="project.email" data-project="project.project_name"></td>
                    <td>project.email</td>
                    <td>project.project_name</td>
                    <td>project.about</td>
                    <td>project.creation_date</td>
                    <td>project.modification_date</td>
                    <td>
                      ${project.file_name && project.file_data 
                        ? `<button class="btn btn-sm btn-secondary view-json-btn" data-file-name="${project.file_name}" data-file-data="${project.file_data}">Ver JSON</button>`
                        : "Sin archivo"}
                    </td>
                  </tr>
              </tbody>
            </table>
          </div>
          <button class="text-center btn btn-success mt-3" id="createProject"  data-bs-toggle="modal" data-bs-target="#createProjectModal">
              Crear 
          </button>
          <button class="text-center btn btn-warning mt-3" id="editProject"  data-bs-toggle="modal" data-bs-target="#editProjectModal">
            Modificar 
          </button>
          <button class="text-center btn btn-danger mt-3" id="DeleteProjects" data-bs-toggle="modal" data-bs-target="#confirmationDeleteProjectModal">
            Eliminar 
          </button>
        </div>
      </div>
          <!-- End Projects Panel -->
    <!-- Modal File-->
    <div class="modal fade" id="jsonModal" tabindex="-1" aria-labelledby="jsonModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="jsonModalLabel">Contenido del archivo JSON</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
          </div>
          <div class="modal-body">
            <p><strong>Nombre del archivo:</strong> <span id="jsonFileName"></span></p>
            <pre id="jsonFileContent" style="background:#f8f9fa; padding:10px; border-radius:6px;"></pre>
          </div>
        </div>
      </div>
    </div>
    <!-- End Modal File-->
    <!-- Report Description Modal -->
    <div class="modal fade" id="reportModal" tabindex="-1" aria-labelledby="reportModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title text-black" id="reportModalLabel">Contenido del reporte</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
          </div>
          <div class="modal-body">
            <p class="text-black"><strong>Nombre del archivo:</strong> <span id="reportModalTitle"></span></p>
            <pre class="text-black" id="reportDescription" style="background:#f8f9fa; padding:10px; border-radius:6px;"></pre>
            <button class="btn btn-primary me-2 d-none" id="reportReasoningBtn">Mostrar razonamiento</button>
            <button class="btn btn-primary" id="copyReportBtn">Copiar</button>
            <div id="reportReasoning" class="mt-3 d-none">
              <h6 class="text-black">Razonamiento del reporte:</h6>
              <pre class="text-black" id="reportReasoningContent" style="background:#f8f9fa; padding:10px; border-radius:6px;"></pre>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- End Report Description Modal -->
    <!-- Modal Edit Projects -->
    <div class="modal fade" id="editProjectModal" tabindex="-1" aria-labelledby="editProjectModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <form id="editProjectForm"> 
          <div class="modal-content" style="width: 30em">
            <div class="modal-header">
              <h5 class="modal-title">Modificar Proyecto</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-body">
              <div class="mb-3">
                <label for="project_selector" class="form-label">Selecciona un Proyecto</label>
                <select class="form-select" id="project_selector">
                  <option value="" selected disabled>-- Selecciona un proyecto --</option>
                      <option
                        value="project.project_name"
                        data-email="project.email"
                        data-about="project.about"
                        data-modification-date="project.modification_date"
                        data-creation-date="project.creation_date"
                      >
                      </option>
                </select>
              </div>
    
              <input type="hidden" name="original_project_name " id="original_project_name_project">
              
              <div class="mb-3">
                <label for="project_name" class="form-label">Nombre del Proyecto</label>
                <input type="text" class="form-control" name="project_name" id="edit_project_name_project">
              </div>
    
              <div class="mb-3">
                <label for="about" class="form-label">Descripción del Proyecto</label>
                <textarea class="form-control" name="about" id="edit_about_project"></textarea>
              </div>

              <div class="mb-3">
                <label for="edit_project_file" class="form-label text-black">Archivo del proyecto (opcional)</label>
                <input type="file" class="form-control" id="edit_project_file" name="edit_project_file" accept=".json">
                <small id="currentFileInfo" class="form-text text-muted"></small>
              </div>

              <!-- Criterios de Aceptabilidad -->
              <div class="mt-4 p-3 border rounded bg-light">
                  <h6 class="text-black mb-3">Criterios de Aceptabilidad</h6>

                  <div class="mb-2">
                      <label for="edit_max_total_vulns" class="form-label text-black">Número total máximo de vulnerabilidades</label>
                      <input type="number" class="form-control" id="edit_max_total_vulns" name="max_total_vulns" value="20" min="0">
                  </div>

                  <div class="mb-2">
                      <label for="edit_min_fixable_ratio" class="form-label text-black">Porcentaje mínimo de vulnerabilidades solucionables (%)</label>
                      <input type="number" class="form-control" id="edit_min_fixable_ratio" name="min_fixable_ratio" value="80" min="0" max="100">
                  </div>

                  <div class="mb-2">
                      <label for="edit_max_severity_level" class="form-label text-black">Nivel máximo de severidad permitido (CVSS)</label>
                      <input type="number" class="form-control" id="edit_max_severity_level" name="max_severity_level" value="7.0" step="0.1" min="0" max="10">
                  </div>

                  <div class="mb-2">
                      <label for="edit_composite_score" class="form-label text-black">Puntaje combinado mínimo (suma ponderada)</label>
                      <input type="number" class="form-control" id="edit_composite_score" name="composite_score" value="75" min="0" max="100">
                      <small class="text-muted">Define un valor agregado que combine varios factores (internamente definido por el sistema).</small>
                  </div>
              </div>
              
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
              <button type="submit" class="btn btn-primary" data-bs-dismiss="modal">Modificar</button>
            </div>
          </div>
        </form>
      </div>
    </div>             
    <!-- Modal Edit Project -->
    <!-- Modal Edit User --> 
    <div class="modal fade" id="editUsuarioModal" tabindex="-1" aria-labelledby="editUsuarioModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <form id="editForm" autocomplete="off"> 
          <div class="modal-content" style="width: 30em">
            <div class="modal-header">
              <h5 class="modal-title">Modificar Usuario</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-body">
              <div class="mb-3">
                <label for="user_selector_user" class="form-label">Selecciona un usuario</label>
                  <select class="form-select" id="user_selector_user">
                    <option value="" selected disabled>-- Selecciona un usuario --</option>
                    {% for user in users %}
                      <option
                      value="{{ user.email }}"
                      data-name="{{ user.user_name }}"
                      data-surname="{{ user.user_surname }}"
                      data-role="{{ user.role }}"
                      data-active="{{ user.active }}"
                      >
                      {{ user.email }} - {{ user.user_name }} {{ user.user_surname }}
                      </option>
                      {% endfor %}
                  </select>
              </div>
    
              <input type="hidden" name="original_email" id="original_email_user" >
    
              <div class="mb-3">
                <label for="user_name" class="form-label">Nombre</label>
                <input type="text" class="form-control" name="user_name" id="edit_user_name_user" >
              </div>
              <div class="mb-3">
                <label for="user_surname" class="form-label">Apellidos</label>
                <input type="text" class="form-control" name="user_surname" id="edit_user_surname_user">
              </div>
              <div class="mb-3">
                <label for="email" class="form-label">Correo Electrónico</label>
                <input type="email" class="form-control" name="email" id="edit_email_user">
              </div>
              <div class="mb-3">
                <label for="password" class="form-label">Contraseña</label>
                <input type="password" class="form-control" name="password" id="edit_password_user" placeholder="Introduce nueva contraseña">
              </div>
              <div class="mb-3">
                <label for="role" class="form-label">Rol</label>
                <select class="form-select" name="role" id="edit_role_user">
                  <option value="usuario">Usuario</option>
                  <option value="admin">Admin</option>
                </select>
              </div>
              <div class="mb-3">
                <label for="active" class="form-label">Activo</label>
                <select class="form-select" name="active" id="edit_active_user">
                    <option value="True">Verdadero</option>
                    <option value="False">Falso</option>
                </select>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
              <button type="submit" class="btn btn-primary" >Modificar</button>
            </div>
          </div>
        </form>
      </div>
    </div>  
    <!-- End Modal edit user-->
    <!-- Modal create_user -->
    <div class="modal fade" id="crearUsuarioModal" tabindex="-1" aria-labelledby="crearUsuarioModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <form method="POST" id="registerForm"> 
          <div class="modal-content" style="width: 30em">
            <div class="modal-header">
              <h5 class="modal-title" id="crearUsuarioModalLabel">Crear Nuevo Usuario</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-body">
              <div class="mb-3">
                <label for="user_name" class="form-label">Nombre</label>
                <input type="text" class="form-control" name="user_name" required>
              </div>
              <div class="mb-3">
                <label for="user_surname" class="form-label">Apellidos</label>
                <input type="text" class="form-control" name="user_surname" required>
              </div>
              <div class="mb-3">
                <label for="email" class="form-label">Correo Electrónico</label>
                <input type="email" class="form-control" name="email" required>
              </div>
              <div class="mb-3">
                <label for="password" class="form-label">Contraseña</label>
                <input type="password" class="form-control" name="password" required>
              </div>
              <div class="mb-3">
                <label for="role" class="form-label">Rol</label>
                <select class="form-select" name="role">
                  <option value="usuario">Usuario</option>
                  <option value="admin">Admin</option>
                </select>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
              <button type="submit" class="btn btn-primary">Crear</button>
            </div>
          </div>
        </form>
      </div>
    </div>
    <!-- End modal create_user -->
    <!-- Modal create_project -->
    <div class="modal fade" id="createProjectModal" tabindex="-1" aria-labelledby="createProjectModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <form method="POST" id="registerProject" enctype="multipart/form-data">
          <div class="modal-content" style="width: 30em">
            <div class="modal-header">
              <h5 class="modal-title text-black" id="createProjectModalLabel">Crear Nuevo Proyecto</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-body">
              <!-- Información básica del proyecto -->
              <div class="mb-3">
                <label for="project_name" class="form-label text-black">Nombre del proyecto</label>
                <input type="text" class="form-control" id="project_name" name="project_name" placeholder="Nombre del proyecto" required>
              </div>
              <div class="mb-3">
                <label for="about" class="about text-black mb-2">Descripción del proyecto</label>
                <textarea class="form-control" rows="4" id="about" name="about" placeholder="Descripción del proyecto"></textarea>
              </div>
              <div class="mb-3">
                <label for="project_file" class="form-label text-black">Archivo del proyecto (opcional)</label>
                <input type="file" class="form-control" id="project_file" name="project_file" accept=".json">
              </div>
              <!-- Criterios de Aceptabilidad -->
              <div class="mt-4 p-3 border rounded bg-light">
                  <h6 class="text-black mb-3">Criterios de Aceptabilidad</h6>

                  <div class="mb-2">
                      <label for="max_total_vulns" class="form-label text-black">Número total máximo de vulnerabilidades</label>
                      <input type="number" class="form-control" id="max_total_vulns" name="max_total_vulns" value="20" min="0">
                  </div>

                  <div class="mb-2">
                      <label for="min_fixable_ratio" class="form-label text-black">Porcentaje mínimo de vulnerabilidades solucionables (%)</label>
                      <input type="number" class="form-control" id="min_fixable_ratio" name="min_fixable_ratio" value="80" min="0" max="100">
                  </div>

                  <div class="mb-2">
                      <label for="max_severity_level" class="form-label text-black">Nivel máximo de severidad permitido (CVSS)</label>
                      <input type="number" class="form-control" id="max_severity_level" name="max_severity_level" value="7.0" step="0.1" min="0" max="10">
                  </div>

                  <div class="mb-2">
                      <label for="composite_score" class="form-label text-black">Puntaje combinado mínimo (suma ponderada)</label>
                      <input type="number" class="form-control" id="composite_score" name="composite_score" value="75" min="0" max="100">
                      <small class="text-muted">Define un valor agregado que combine varios factores (internamente definido por el sistema).</small>
                  </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
              <button type="submit" class="btn btn-primary">Crear</button>
            </div>
          </div>
        </form>
      </div>
    </div>
    <!-- End modal create_project -->
    <!-- Modal confirmationDeleteUser-->
    <div class="modal fade" id="confirmationDeleteUserModal" tabindex="-1" aria-labelledby="confirmationDeleteUserModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content" style="width: 30em">
          <div class="modal-header">
            <h5 class="modal-title">Confirmación</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
          </div>
          <div class="modal-body">
            <p>¿Estás seguro de que deseas eliminar el/los usuario(s) seleccionado(s)?</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            <button type="button" id="confirmDeleteUsers" class="btn btn-danger" data-bs-dismiss="modal">Eliminar</button>
          </div>
        </div>
      </div>
    </div>
    <!-- End modal confirmationDeleteUser -->
    <!-- Modal confirmationDeleteProject-->
    <div class="modal fade" id="confirmationDeleteProjectModal" tabindex="-1" aria-labelledby="confirmationDeleteProjectModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content" style="width: 30em">
          <div class="modal-header">
            <h5 class="modal-title">Confirmación</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
          </div>
          <div class="modal-body">
            <p>¿Estás seguro de que deseas eliminar el/los proyecto(s) seleccionado(s)?</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
            <button type="button" id="confirmDeleteProjects" class="btn btn-danger" data-bs-dismiss="modal">Eliminar</button>
          </div>
        </div>
      </div>
    </div>
</main>
{% endblock %}
{% block footer %}
    {{ super() }}
{% endblock %}
{% block scripts %}
    {{super()}}
    <script src="{{ url_for('static', filename='js/account.js') }}"></script>
    <script>
      const currentUserEmail = "{{ user.email }}";
    </script>
{% endblock %}